var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`.icon-button{border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;background-color:transparent}.icon-button svg{height:1.5em;width:1.5em;color:var(--primary-color, #0f6cbd)}.icon-remove svg,.icon-record svg{color:var(--danger-color, #d13438)}.icon-stop svg{color:#333}.wave-container{margin-top:.75em;border:1px solid var(--border-color, rgba(100, 100, 100, .2));border-radius:10em;padding:.5em;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:row-reverse}.wave-container #waveform{flex:1}#waveform{position:relative;background-color:#6464641a;border-radius:10em}.wave-controls{display:flex;align-items:center;justify-content:center}.player-line-control{position:relative;height:4px;border-radius:4px;background-color:#ddd;transition:all .1s ease-in}.player-line-control:hover{height:8px}.player-line-control__head{position:absolute;height:inherit;background-color:var(--primary-color, #0f6cbd);border-radius:inherit}.player-volume{display:flex;align-items:center;line-height:10px}.player-volume-bar{width:50px;border-radius:4px;position:relative;width:0;overflow:hidden}.player-volume__icon{width:24px;height:24px;border:0;border-radius:0;padding:0;background-color:unset;margin-right:3px}.player-volume:hover .player-volume-bar{width:50px}.recorder-player{margin:.5em 0;width:100%;display:flex;align-items:center;justify-content:center}.vue-player{width:100%;height:unset;border:0;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:unset;border:1px solid var(--border-color, rgba(100, 100, 100, .2));border-radius:10em;padding:.5em;box-sizing:border-box;margin-top:.75em}.vue-player>.vue-player-bar{margin:0 0 0 5px}.vue-player>.vue-player-bar>.vue-player__progress{width:100%}.vue-player-bar{display:flex;align-items:center;height:32px;flex:1}.vue-player-actions{width:55%;display:flex;align-items:center;justify-content:space-around;flex:0}.vue-player__progress{margin:0 .9em}.vue-player__time{white-space:nowrap;color:var(--text-color, #333);font-size:.8em;width:80px}.vue-player__play{width:32px;height:32px}.disabled,*:disabled,div[disabled]{opacity:.5;pointer-events:none;cursor:not-allowed;user-select:none;border-color:#999!important}figure{margin:0}.recorder-container{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.75em;margin:.75em}.recorder-container .compact{display:flex}.recorder-action{display:flex;align-items:center;justify-content:center}.recorder-action .vue-recorder-action{width:48px;height:48px;border:1px solid var(--primary-color, #0f6cbd);font-size:18px}.recorder-action .vue-recorder-stop{width:32px;height:32px;margin-left:4px;border:1px solid var(--primary-color, #0f6cbd);font-size:12px}.recorder-message>span{display:block;padding:.5em;border-radius:1em;margin:.5em 0}.recorder-message>span.color-primary{background-color:#b4d6fa}.recorder-message>span.color-success{background-color:#9fd89f}.recorder-message>span.color-danger{background-color:#f4bfab}.vue-records{display:flex;flex-direction:column;width:100%;align-items:center;margin-top:.75em}.vue-records .list-actions{display:flex}.vue-records .list-actions>.icon-button{width:24px;height:24px}.vue-records__record{display:flex;width:100%;justify-content:space-between;padding:.5em;border-radius:2em}.vue-records__record--selected{border:1px solid var(--border-color, rgba(100, 100, 100, .2))}.vue-records__record .icon-button{background-color:transparent}.timing{display:flex;flex-direction:column;align-items:center;justify-content:center}.timing .time-limit,.timing .time-attempt{font-size:.75em}.timing .recorder-timer{margin:0 .25em}.timing .recording-time{text-transform:capitalize}
(function(K,te){typeof exports=="object"&&typeof module!="undefined"?te(exports):typeof define=="function"&&define.amd?define(["exports"],te):(K=typeof globalThis!="undefined"?globalThis:K||self,te(K["vuejs2-audio-recorder"]={}))})(this,function(K){"use strict";`;document.head.appendChild(__vite_style__);class te{constructor(C){this.backendEndpoint=C}async postBackend(C){try{return!!(await fetch(this.backendEndpoint,{method:"POST",body:C})).ok}catch{return!1}}}function Z(s){return s?new Date(s*1e3).toISOString().substring(14,19):"00:00"}class ge{constructor(C){this.bufferSize=C.bufferSize||4096,this.sampleRate=C.sampleRate,this.samples=C.samples}finish(){this._joinSamples();const C=new ArrayBuffer(44+this.samples.length*2),P=new DataView(C);this._writeString(P,0,"RIFF"),P.setUint32(4,36+this.samples.length*2,!0),this._writeString(P,8,"WAVE"),this._writeString(P,12,"fmt "),P.setUint32(16,16,!0),P.setUint16(20,1,!0),P.setUint16(22,1,!0),P.setUint32(24,this.sampleRate,!0),P.setUint32(28,this.sampleRate*4,!0),P.setUint16(32,4,!0),P.setUint16(34,16,!0),this._writeString(P,36,"data"),P.setUint32(40,this.samples.length*2,!0),this._floatTo16BitPCM(P,44,this.samples);const I=new Blob([P],{type:"audio/wav"});return{id:Date.now(),blob:I,url:URL.createObjectURL(I)}}_floatTo16BitPCM(C,P,I){for(let F=0;F<I.length;F++,P+=2){const q=Math.max(-1,Math.min(1,I[F]));C.setInt16(P,q<0?q*32768:q*32767,!0)}}_joinSamples(){const C=this.samples.length*this.bufferSize,P=new Float64Array(C);let I=0;for(let F=0;F<this.samples.length;F++){const q=this.samples[F];P.set(q,I),I+=q.length}this.samples=P}_writeString(C,P,I){for(let F=0;F<I.length;F++)C.setUint8(P+F,I.charCodeAt(F))}}class be{constructor(C={}){this.beforeRecording=C.beforeRecording,this.pauseRecording=C.pauseRecording,this.afterRecording=C.afterRecording,this.micFailed=C.micFailed,this.encoderOptions={bitRate:C.bitRate,sampleRate:C.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this.wavSamples=[],this._duration=0}start(){const C={video:!1,audio:{channelCount:1,echoCancellation:!1}};this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia(C).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0}stop(){this.stream.getTracks().forEach(I=>I.stop()),this.input.disconnect(),this.processor.disconnect(),this.context.close();let C=null;C=new ge({bufferSize:this.bufferSize,sampleRate:this.encoderOptions.sampleRate,samples:this.wavSamples}).finish(),this.wavSamples=[],C.duration=Z(this.duration),this.records.push(C),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(C)}pause(){this.stream.getTracks().forEach(C=>C.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}recordList(){return this.records}lastRecord(){return this.records.slice(-1).pop()}_micCaptured(C){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(C),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=C,this.processor.onaudioprocess=P=>{const I=P.inputBuffer.getChannelData(0);let F=0;this.wavSamples.push(new Float32Array(I));for(let q=0;q<I.length;++q)F+=I[q]*I[q];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(F/I.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(C){this.micFailed&&this.micFailed(C)}}var we=function(){var s=this,C=s.$createElement,P=s._self._c||C;return P("button",{staticClass:"icon-button",class:"icon-"+s.name,attrs:{type:"button"},on:{click:function(I){return s.onClick()}}},[P("span",{domProps:{innerHTML:s._s(s.icons[s.name])}})])},Ae=[],dt="";function J(s,C,P,I,F,q,L,h){var b=typeof s=="function"?s.options:s;C&&(b.render=C,b.staticRenderFns=P,b._compiled=!0),I&&(b.functional=!0),q&&(b._scopeId="data-v-"+q);var g;if(L?(g=function(x){x=x||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!x&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(x=__VUE_SSR_CONTEXT__),F&&F.call(this,x),x&&x._registeredComponents&&x._registeredComponents.add(L)},b._ssrRegister=g):F&&(g=h?function(){F.call(this,(b.functional?this.parent:this).$root.$options.shadowRoot)}:F),g)if(b.functional){b._injectStyles=g;var V=b.render;b.render=function(B,$){return g.call($),V(B,$)}}else{var S=b.beforeCreate;b.beforeCreate=S?[].concat(S,g):[g]}return{exports:s,options:b}}const Pe={props:{name:{type:String}},data(){return{icons:{download:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M3.5 13h9a.5.5 0 0 1 .09.992L12.5 14h-9a.5.5 0 0 1-.09-.992L3.5 13h9h-9ZM7.91 1.008L8 1a.5.5 0 0 1 .492.41l.008.09v8.792l2.682-2.681a.5.5 0 0 1 .638-.058l.07.058a.5.5 0 0 1 .057.638l-.058.069l-3.535 3.536a.5.5 0 0 1-.638.057l-.07-.057l-3.535-3.536a.5.5 0 0 1 .638-.765l.069.058L7.5 10.292V1.5a.5.5 0 0 1 .41-.492L8 1l-.09.008Z"/></svg>',upload:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M3.5 2a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9Zm4.854 2.146a.5.5 0 0 0-.708 0l-3.5 3.5a.5.5 0 1 0 .708.708L7.5 5.707V13.5a.5.5 0 0 0 1 0V5.707l2.646 2.647a.5.5 0 0 0 .708-.708l-3.5-3.5Z"/></svg>',mic:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M5.5 4.5a2.5 2.5 0 0 1 5 0V8a2.5 2.5 0 0 1-5 0V4.5ZM8 3a1.5 1.5 0 0 0-1.5 1.5V8a1.5 1.5 0 1 0 3 0V4.5A1.5 1.5 0 0 0 8 3ZM4 7.5a.5.5 0 0 1 .5.5a3.5 3.5 0 1 0 7 0a.5.5 0 0 1 1 0a4.5 4.5 0 0 1-4 4.473V13.5a.5.5 0 0 1-1 0v-1.027A4.5 4.5 0 0 1 3.5 8a.5.5 0 0 1 .5-.5Z"/></svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M3.75 2A1.75 1.75 0 0 0 2 3.75v8.5c0 .966.784 1.75 1.75 1.75h1.5A1.75 1.75 0 0 0 7 12.25v-8.5A1.75 1.75 0 0 0 5.25 2h-1.5ZM3 3.75A.75.75 0 0 1 3.75 3h1.5a.75.75 0 0 1 .75.75v8.5a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-8.5ZM10.75 2A1.75 1.75 0 0 0 9 3.75v8.5c0 .966.784 1.75 1.75 1.75h1.5A1.75 1.75 0 0 0 14 12.25v-8.5A1.75 1.75 0 0 0 12.25 2h-1.5ZM10 3.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v8.5a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-8.5Z"/></svg>',play:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M5.745 3.064A.5.5 0 0 0 5 3.5v9a.5.5 0 0 0 .745.436l8-4.5a.5.5 0 0 0 0-.871l-8-4.5ZM4 3.5a1.5 1.5 0 0 1 2.235-1.307l8 4.5a1.5 1.5 0 0 1 0 2.615l-8 4.5A1.5 1.5 0 0 1 4 12.5v-9Z"/></svg>',save:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M4 3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1V9.5A1.5 1.5 0 0 1 5.5 8h5A1.5 1.5 0 0 1 12 9.5V13a1 1 0 0 0 1-1V5.621a1 1 0 0 0-.293-.707l-1.621-1.621A1 1 0 0 0 10.379 3H10v1.5A1.5 1.5 0 0 1 8.5 6h-2A1.5 1.5 0 0 1 5 4.5V3H4Zm2 0v1.5a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5V3H6Zm5 10V9.5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0-.5.5V13h6ZM2 4a2 2 0 0 1 2-2h6.379a2 2 0 0 1 1.414.586l1.621 1.621A2 2 0 0 1 14 5.621V12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Z"/></svg>',stop:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M12.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h9Zm-9-1A1.5 1.5 0 0 0 2 3.5v9A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 12.5 2h-9Z"/></svg>',volume:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path d="M8.694 2.04A.5.5 0 0 1 9 2.5v11a.5.5 0 0 1-.85.357l-2.927-2.875H3.5a1.5 1.5 0 0 1-1.5-1.5v-2.99a1.5 1.5 0 0 1 1.5-1.5h1.724l2.927-2.85a.5.5 0 0 1 .543-.103zm3.043 1.02l.087.058l.098.085c.063.056.15.138.252.245c.206.213.476.527.746.938a6.542 6.542 0 0 1 1.083 3.618a6.522 6.522 0 0 1-1.083 3.614c-.27.41-.541.724-.746.936l-.142.141l-.187.17l-.033.026a.5.5 0 0 1-.688-.72l.13-.117a5.49 5.49 0 0 0 .83-.985c.46-.7.919-1.73.919-3.065a5.542 5.542 0 0 0-.919-3.069a5.588 5.588 0 0 0-.54-.698l-.17-.176l-.184-.17a.5.5 0 0 1 .547-.832zM8 3.684L5.776 5.851a.5.5 0 0 1-.349.142H3.5a.5.5 0 0 0-.5.5v2.989a.5.5 0 0 0 .5.5h1.927a.5.5 0 0 1 .35.143L8 12.308V3.685zm2.738 1.374l.1.07l.133.126l.054.056c.114.123.26.302.405.54c.292.48.574 1.193.574 2.148c0 .954-.282 1.668-.573 2.148a3.388 3.388 0 0 1-.405.541l-.102.105l-.07.065l-.04.033l-.063.03c-.133.052-.442.139-.64-.108a.5.5 0 0 1 .012-.638l.134-.129l.034-.036c.075-.08.179-.208.284-.382c.21-.345.429-.882.429-1.63c0-.747-.219-1.283-.428-1.627a2.467 2.467 0 0 0-.223-.311l-.095-.105l-.069-.065a.5.5 0 0 1 .55-.83z" fill="currentColor" fill-rule="nonzero"/></svg>',volumeMute:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M8.694 2.04A.5.5 0 0 1 9 2.5v11a.5.5 0 0 1-.85.357l-2.927-2.875H3.5a1.5 1.5 0 0 1-1.5-1.5v-2.99a1.5 1.5 0 0 1 1.5-1.5h1.724l2.927-2.85a.5.5 0 0 1 .543-.103ZM8 3.684L5.777 5.851a.5.5 0 0 1-.35.142H3.5a.5.5 0 0 0-.5.5v2.989a.5.5 0 0 0 .5.5h1.928a.5.5 0 0 1 .35.143L8 12.308V3.685Zm2.147 2.461a.5.5 0 0 1 .707 0l1.147 1.147l1.146-1.147a.5.5 0 1 1 .707.708L12.708 8l1.146 1.146a.5.5 0 1 1-.707.708L12 8.707l-1.147 1.147a.5.5 0 0 1-.707-.708L11.293 8l-1.146-1.146a.5.5 0 0 1 0-.708Z"/></svg>',record:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8ZM8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1ZM2 8a6 6 0 1 1 12 0A6 6 0 0 1 2 8Z"/></svg>',remove:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-1 0v-5a.5.5 0 0 1 .5-.5Zm-4.74 6.703A1.5 1.5 0 0 0 6.246 14h3.508a1.5 1.5 0 0 0 1.487-1.297L12.427 4H3.573l1.187 8.703Z"/></svg>',backward:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M8.354 12.146a.5.5 0 0 1-.708.708l-4.5-4.5a.5.5 0 0 1 0-.708l4.5-4.5a.5.5 0 1 1 .708.708L4.207 8l4.147 4.146Zm4 0a.5.5 0 0 1-.708.708l-4.5-4.5a.5.5 0 0 1 0-.708l4.5-4.5a.5.5 0 0 1 .708.708L8.207 8l4.147 4.146Z"/></svg>',forward:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M7.646 3.854a.5.5 0 1 1 .708-.708l4.5 4.5a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708-.708L11.793 8L7.646 3.854Zm-4 0a.5.5 0 1 1 .708-.708l4.5 4.5a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708-.708L7.793 8L3.646 3.854Z"/></svg>'}}},methods:{onClick(){this.$emit("click")}}},oe={};var _e=J(Pe,we,Ae,!1,ke,null,null,null);function ke(s){for(let C in oe)this[C]=oe[C]}var re=function(){return _e.exports}();function Ce(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ue={exports:{}};/*!
 * wavesurfer.js 6.6.3 (2023-04-04)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(s,C){(function(I,F){s.exports=F()})(self,()=>(()=>{var P={"./src/drawer.canvasentry.js":(L,h,b)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=S(b("./src/util/style.js")),V=S(b("./src/util/get-id.js"));function S(m){return m&&m.__esModule?m:{default:m}}function x(m){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},x(m)}function B(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function $(m,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(m,O(p.key),p)}}function A(m,d,v){return d&&$(m.prototype,d),v&&$(m,v),Object.defineProperty(m,"prototype",{writable:!1}),m}function O(m){var d=M(m,"string");return x(d)==="symbol"?d:String(d)}function M(m,d){if(x(m)!=="object"||m===null)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var p=v.call(m,d||"default");if(x(p)!=="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(m)}var T=function(){function m(){B(this,m),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,V.default)(typeof this.constructor.name!="undefined"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return A(m,[{key:"initWave",value:function(v){this.wave=v,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(v){this.progress=v,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(v,p,_,R){this.start=this.wave.offsetLeft/p||0,this.end=this.start+v/p,this.wave.width=_,this.wave.height=R;var E={width:v+"px"};(0,g.default)(this.wave,E),this.hasProgressCanvas&&(this.progress.width=_,this.progress.height=R,(0,g.default)(this.progress,E))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(v,p){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,v),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,p))}},{key:"getFillStyle",value:function(v,p){if(typeof p=="string"||p instanceof CanvasGradient)return p;var _=v.createLinearGradient(0,0,0,v.canvas.height);return p.forEach(function(R,E){return _.addColorStop(E/p.length,R)}),_}},{key:"applyCanvasTransforms",value:function(v){v&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(v,p,_,R,E){this.fillRectToContext(this.waveCtx,v,p,_,R,E),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,v,p,_,R,E)}},{key:"fillRectToContext",value:function(v,p,_,R,E,y){!v||(y?this.drawRoundedRect(v,p,_,R,E,y):v.fillRect(p,_,R,E))}},{key:"drawRoundedRect",value:function(v,p,_,R,E,y){E!==0&&(E<0&&(E*=-1,_-=E),v.beginPath(),v.moveTo(p+y,_),v.lineTo(p+R-y,_),v.quadraticCurveTo(p+R,_,p+R,_+y),v.lineTo(p+R,_+E-y),v.quadraticCurveTo(p+R,_+E,p+R-y,_+E),v.lineTo(p+y,_+E),v.quadraticCurveTo(p,_+E,p,_+E-y),v.lineTo(p,_+y),v.quadraticCurveTo(p,_,p+y,_),v.closePath(),v.fill())}},{key:"drawLines",value:function(v,p,_,R,E,y){this.drawLineToContext(this.waveCtx,v,p,_,R,E,y),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,v,p,_,R,E,y)}},{key:"drawLineToContext",value:function(v,p,_,R,E,y,f){if(!!v){var w=p.length/2,l=Math.round(w*this.start),n=Math.round(w*this.end)+1,i=l,u=n,r=this.wave.width/(u-i-1),t=R+E,o=_/R;v.beginPath(),v.moveTo((i-l)*r,t),v.lineTo((i-l)*r,t-Math.round((p[2*i]||0)/o));var a,e,c;for(a=i;a<u;a++)e=p[2*a]||0,c=Math.round(e/o),v.lineTo((a-l)*r+this.halfPixel,t-c);var k=u-1;for(k;k>=i;k--)e=p[2*k+1]||0,c=Math.round(e/o),v.lineTo((k-l)*r+this.halfPixel,t-c);v.lineTo((i-l)*r,t-Math.round((p[2*i+1]||0)/o)),v.closePath(),v.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(v,p,_){var R=this;if(_==="blob")return new Promise(function(E){R.wave.toBlob(E,v,p)});if(_==="dataURL")return this.wave.toDataURL(v,p)}}]),m}();h.default=T,L.exports=h.default},"./src/drawer.js":(L,h,b)=>{function g(y){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},g(y)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var V=x(b("./src/util/index.js"));function S(y){if(typeof WeakMap!="function")return null;var f=new WeakMap,w=new WeakMap;return(S=function(n){return n?w:f})(y)}function x(y,f){if(!f&&y&&y.__esModule)return y;if(y===null||g(y)!=="object"&&typeof y!="function")return{default:y};var w=S(f);if(w&&w.has(y))return w.get(y);var l={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in y)if(i!=="default"&&Object.prototype.hasOwnProperty.call(y,i)){var u=n?Object.getOwnPropertyDescriptor(y,i):null;u&&(u.get||u.set)?Object.defineProperty(l,i,u):l[i]=y[i]}return l.default=y,w&&w.set(y,l),l}function B(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function $(y,f){for(var w=0;w<f.length;w++){var l=f[w];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(y,O(l.key),l)}}function A(y,f,w){return f&&$(y.prototype,f),w&&$(y,w),Object.defineProperty(y,"prototype",{writable:!1}),y}function O(y){var f=M(y,"string");return g(f)==="symbol"?f:String(f)}function M(y,f){if(g(y)!=="object"||y===null)return y;var w=y[Symbol.toPrimitive];if(w!==void 0){var l=w.call(y,f||"default");if(g(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(y)}function T(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),f&&m(y,f)}function m(y,f){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,n){return l.__proto__=n,l},m(y,f)}function d(y){var f=_();return function(){var l=R(y),n;if(f){var i=R(this).constructor;n=Reflect.construct(l,arguments,i)}else n=l.apply(this,arguments);return v(this,n)}}function v(y,f){if(f&&(g(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(y)}function p(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function _(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(y){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},R(y)}var E=function(y){T(w,y);var f=d(w);function w(l,n){var i;return B(this,w),i=f.call(this),i.container=V.withOrientation(l,n.vertical),i.params=n,i.width=0,i.height=n.height*i.params.pixelRatio,i.lastPos=0,i.wrapper=null,i}return A(w,[{key:"style",value:function(n,i){return V.style(n,i)}},{key:"createWrapper",value:function(){this.wrapper=V.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(n,i){!i&&n.preventDefault();var u=V.withOrientation(n.targetTouches?n.targetTouches[0]:n,this.params.vertical).clientX,r=this.wrapper.getBoundingClientRect(),t=this.width,o=this.getWidth(),a=this.getProgressPixels(r,u),e;return!this.params.fillParent&&t<o?e=a*(this.params.pixelRatio/t)||0:e=(a+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,V.clamp(e,0,1)}},{key:"getProgressPixels",value:function(n,i){return this.params.rtl?n.right-i:i-n.left}},{key:"setupWrapperEvents",value:function(){var n=this;this.wrapper.addEventListener("click",function(i){var u=V.withOrientation(i,n.params.vertical),r=n.wrapper.offsetHeight-n.wrapper.clientHeight;if(r!==0){var t=n.wrapper.getBoundingClientRect();if(u.clientY>=t.bottom-r)return}n.params.interact&&n.fireEvent("click",i,n.handleEvent(i))}),this.wrapper.addEventListener("dblclick",function(i){n.params.interact&&n.fireEvent("dblclick",i,n.handleEvent(i))}),this.wrapper.addEventListener("scroll",function(i){return n.fireEvent("scroll",i)})}},{key:"drawPeaks",value:function(n,i,u,r){this.setWidth(i)||this.clearWave(),this.params.barWidth?this.drawBars(n,0,u,r):this.drawWave(n,0,u,r)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(n){var i=this.wrapper.scrollWidth*n;this.recenterOnPosition(i,!0)}},{key:"recenterOnPosition",value:function(n,i){var u=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),t=this.wrapper.scrollWidth-this.wrapper.clientWidth,o=n-r,a=o-u;if(t!=0){if(!i&&-r<=a&&a<r){var e=this.params.autoCenterRate;e/=r,e*=t,a=Math.max(-e,Math.min(e,a)),o=u+a}o=Math.max(0,Math.min(t,o)),o!=u&&(this.wrapper.scrollLeft=o)}}},{key:"getScrollX",value:function(){var n=0;if(this.wrapper){var i=this.params.pixelRatio;if(n=Math.round(this.wrapper.scrollLeft*i),this.params.scrollParent){var u=~~(this.wrapper.scrollWidth*i-this.getWidth());n=Math.min(u,Math.max(0,n))}}return n}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(n){if(this.width==n)return!1;if(this.width=n,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var i=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:i})}return this.updateSize(),!0}},{key:"setHeight",value:function(n){return n==this.height?!1:(this.height=n,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(n){var i=1/this.params.pixelRatio,u=Math.round(n*this.width)*i;if(u<this.lastPos||u-this.lastPos>=i){if(this.lastPos=u,this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*n);this.recenterOnPosition(r,this.params.autoCenterImmediately)}this.updateProgress(u)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(n,i,u,r){}},{key:"drawWave",value:function(n,i,u,r){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(n){}}]),w}(V.Observer);h.default=E,L.exports=h.default},"./src/drawer.multicanvas.js":(L,h,b)=>{function g(l){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},g(l)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var V=A(b("./src/drawer.js")),S=$(b("./src/util/index.js")),x=A(b("./src/drawer.canvasentry.js"));function B(l){if(typeof WeakMap!="function")return null;var n=new WeakMap,i=new WeakMap;return(B=function(r){return r?i:n})(l)}function $(l,n){if(!n&&l&&l.__esModule)return l;if(l===null||g(l)!=="object"&&typeof l!="function")return{default:l};var i=B(n);if(i&&i.has(l))return i.get(l);var u={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in l)if(t!=="default"&&Object.prototype.hasOwnProperty.call(l,t)){var o=r?Object.getOwnPropertyDescriptor(l,t):null;o&&(o.get||o.set)?Object.defineProperty(u,t,o):u[t]=l[t]}return u.default=l,i&&i.set(l,u),u}function A(l){return l&&l.__esModule?l:{default:l}}function O(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}function M(l,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,m(u.key),u)}}function T(l,n,i){return n&&M(l.prototype,n),i&&M(l,i),Object.defineProperty(l,"prototype",{writable:!1}),l}function m(l){var n=d(l,"string");return g(n)==="symbol"?n:String(n)}function d(l,n){if(g(l)!=="object"||l===null)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var u=i.call(l,n||"default");if(g(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(l)}function v(l,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(n&&n.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),n&&p(l,n)}function p(l,n){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,r){return u.__proto__=r,u},p(l,n)}function _(l){var n=y();return function(){var u=f(l),r;if(n){var t=f(this).constructor;r=Reflect.construct(u,arguments,t)}else r=u.apply(this,arguments);return R(this,r)}}function R(l,n){if(n&&(g(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(l)}function E(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(l){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},f(l)}var w=function(l){v(i,l);var n=_(i);function i(u,r){var t;return O(this,i),t=n.call(this,u,r),t.maxCanvasWidth=r.maxCanvasWidth,t.maxCanvasElementWidth=Math.round(r.maxCanvasWidth/r.pixelRatio),t.hasProgressCanvas=r.waveColor!=r.progressColor,t.halfPixel=.5/r.pixelRatio,t.canvases=[],t.progressWave=null,t.EntryClass=x.default,t.canvasContextAttributes=r.drawingContextAttributes,t.overlap=2*Math.ceil(r.pixelRatio/2),t.barRadius=r.barRadius||0,t.vertical=r.vertical,t}return T(i,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=S.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var r=this,t=Math.round(this.width/this.params.pixelRatio),o=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<o;)this.addCanvas();for(;this.canvases.length>o;)this.removeCanvas();var a=this.maxCanvasWidth+this.overlap,e=this.canvases.length-1;this.canvases.forEach(function(c,k){k==e&&(a=r.width-r.maxCanvasWidth*e),r.updateDimensions(c,a,r.height),c.clearWave()})}},{key:"addCanvas",value:function(){var r=new this.EntryClass;r.canvasContextAttributes=this.canvasContextAttributes,r.hasProgressCanvas=this.hasProgressCanvas,r.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,o=S.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(o,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),r.initWave(o),this.hasProgressCanvas){var a=S.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(a,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),r.initProgress(a)}this.canvases.push(r)}},{key:"removeCanvas",value:function(){var r=this.canvases[this.canvases.length-1];r.wave.parentElement.removeChild(r.wave.domElement),this.hasProgressCanvas&&r.progress.parentElement.removeChild(r.progress.domElement),r&&(r.destroy(),r=null),this.canvases.pop()}},{key:"updateDimensions",value:function(r,t,o){var a=Math.round(t/this.params.pixelRatio),e=Math.round(this.width/this.params.pixelRatio);r.updateDimensions(a,e,t,o),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var r=this;S.frame(function(){r.canvases.forEach(function(t){return t.clearWave()})})()}},{key:"drawBars",value:function(r,t,o,a){var e=this;return this.prepareDraw(r,t,o,a,function(c){var k=c.absmax,j=c.hasMinVals;c.height;var W=c.offsetY,N=c.halfH,z=c.peaks,D=c.channelIndex;if(o!==void 0){var U=j?2:1,X=z.length/U,H=e.params.barWidth*e.params.pixelRatio,Q=e.params.barGap===null?Math.max(e.params.pixelRatio,~~(H/2)):Math.max(e.params.pixelRatio,e.params.barGap*e.params.pixelRatio),G=H+Q,Y=X/e.width,lt=o,ct=a,ee=lt;for(ee;ee<ct;ee+=G){var ae=0,se=Math.floor(ee*Y)*U,ft=Math.floor((ee+G)*Y)*U;do{var ye=Math.abs(z[se]);ye>ae&&(ae=ye),se+=U}while(se<ft);var ne=Math.round(ae/k*N);e.params.barMinHeight&&(ne=Math.max(ne,e.params.barMinHeight)),e.fillRect(ee+e.halfPixel,N-ne+W,H+e.halfPixel,ne*2,e.barRadius,D)}}})}},{key:"drawWave",value:function(r,t,o,a){var e=this;return this.prepareDraw(r,t,o,a,function(c){var k=c.absmax,j=c.hasMinVals;c.height;var W=c.offsetY,N=c.halfH,z=c.peaks,D=c.channelIndex;if(!j){var U=[],X=z.length,H=0;for(H;H<X;H++)U[2*H]=z[H],U[2*H+1]=-z[H];z=U}o!==void 0&&e.drawLine(z,k,N,W,o,a,D),e.fillRect(0,N+W-e.halfPixel,e.width,e.halfPixel,e.barRadius,D)})}},{key:"drawLine",value:function(r,t,o,a,e,c,k){var j=this,W=this.params.splitChannelsOptions.channelColors[k]||{},N=W.waveColor,z=W.progressColor;this.canvases.forEach(function(D,U){j.setFillStyles(D,N,z),j.applyCanvasTransforms(D,j.params.vertical),D.drawLines(r,t,o,a,e,c)})}},{key:"fillRect",value:function(r,t,o,a,e,c){var k=Math.floor(r/this.maxCanvasWidth),j=Math.min(Math.ceil((r+o)/this.maxCanvasWidth)+1,this.canvases.length),W=k;for(W;W<j;W++){var N=this.canvases[W],z=W*this.maxCanvasWidth,D={x1:Math.max(r,W*this.maxCanvasWidth),y1:t,x2:Math.min(r+o,W*this.maxCanvasWidth+N.wave.width),y2:t+a};if(D.x1<D.x2){var U=this.params.splitChannelsOptions.channelColors[c]||{},X=U.waveColor,H=U.progressColor;this.setFillStyles(N,X,H),this.applyCanvasTransforms(N,this.params.vertical),N.fillRects(D.x1-z,D.y1,D.x2-D.x1,D.y2-D.y1,e)}}}},{key:"hideChannel",value:function(r){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(r)}},{key:"prepareDraw",value:function(r,t,o,a,e,c,k){var j=this;return S.frame(function(){if(r[0]instanceof Array){var W=r;if(j.params.splitChannels){var N=W.filter(function(G,Y){return!j.hideChannel(Y)});j.params.splitChannelsOptions.overlay||j.setHeight(Math.max(N.length,1)*j.params.height*j.params.pixelRatio);var z;return j.params.splitChannelsOptions&&j.params.splitChannelsOptions.relativeNormalization&&(z=S.max(W.map(function(G){return S.absMax(G)}))),W.forEach(function(G,Y){return j.prepareDraw(G,Y,o,a,e,N.indexOf(G),z)})}r=W[0]}if(!j.hideChannel(t)){var D=1/j.params.barHeight;j.params.normalize&&(D=k===void 0?S.absMax(r):k);var U=[].some.call(r,function(G){return G<0}),X=j.params.height*j.params.pixelRatio,H=X/2,Q=X*c||0;return j.params.splitChannelsOptions&&j.params.splitChannelsOptions.overlay&&(Q=0),e({absmax:D,hasMinVals:U,height:X,offsetY:Q,halfH:H,peaks:r,channelIndex:t})}})()}},{key:"setFillStyles",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;r.setFillStyles(t,o)}},{key:"applyCanvasTransforms",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.applyCanvasTransforms(t)}},{key:"getImage",value:function(r,t,o){if(o==="blob")return Promise.all(this.canvases.map(function(e){return e.getImage(r,t,o)}));if(o==="dataURL"){var a=this.canvases.map(function(e){return e.getImage(r,t,o)});return a.length>1?a:a[0]}}},{key:"updateProgress",value:function(r){this.style(this.progressWave,{width:r+"px"})}}]),i}(V.default);h.default=w,L.exports=h.default},"./src/mediaelement-webaudio.js":(L,h,b)=>{function g(f){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},g(f)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var V=S(b("./src/mediaelement.js"));function S(f){return f&&f.__esModule?f:{default:f}}function x(f,w){if(!(f instanceof w))throw new TypeError("Cannot call a class as a function")}function B(f,w){for(var l=0;l<w.length;l++){var n=w[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,A(n.key),n)}}function $(f,w,l){return w&&B(f.prototype,w),l&&B(f,l),Object.defineProperty(f,"prototype",{writable:!1}),f}function A(f){var w=O(f,"string");return g(w)==="symbol"?w:String(w)}function O(f,w){if(g(f)!=="object"||f===null)return f;var l=f[Symbol.toPrimitive];if(l!==void 0){var n=l.call(f,w||"default");if(g(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(f)}function M(){return typeof Reflect!="undefined"&&Reflect.get?M=Reflect.get.bind():M=function(w,l,n){var i=T(w,l);if(!!i){var u=Object.getOwnPropertyDescriptor(i,l);return u.get?u.get.call(arguments.length<3?w:n):u.value}},M.apply(this,arguments)}function T(f,w){for(;!Object.prototype.hasOwnProperty.call(f,w)&&(f=E(f),f!==null););return f}function m(f,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(w&&w.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),w&&d(f,w)}function d(f,w){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},d(f,w)}function v(f){var w=R();return function(){var n=E(f),i;if(w){var u=E(this).constructor;i=Reflect.construct(n,arguments,u)}else i=n.apply(this,arguments);return p(this,i)}}function p(f,w){if(w&&(g(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(f)}function _(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(f){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},E(f)}var y=function(f){m(l,f);var w=v(l);function l(n){var i;return x(this,l),i=w.call(this,n),i.params=n,i.sourceMediaElement=null,i}return $(l,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(i,u,r){M(E(l.prototype),"_load",this).call(this,i,u,r),this.createMediaElementSource(i)}},{key:"createMediaElementSource",value:function(i){this.sourceMediaElement=this.ac.createMediaElementSource(i),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(i,u){return this.resumeAudioContext(),M(E(l.prototype),"play",this).call(this,i,u)}},{key:"destroy",value:function(){M(E(l.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),l}(V.default);h.default=y,L.exports=h.default},"./src/mediaelement.js":(L,h,b)=>{function g(n){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},g(n)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var V=$(b("./src/webaudio.js")),S=B(b("./src/util/index.js"));function x(n){if(typeof WeakMap!="function")return null;var i=new WeakMap,u=new WeakMap;return(x=function(t){return t?u:i})(n)}function B(n,i){if(!i&&n&&n.__esModule)return n;if(n===null||g(n)!=="object"&&typeof n!="function")return{default:n};var u=x(i);if(u&&u.has(n))return u.get(n);var r={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var a=t?Object.getOwnPropertyDescriptor(n,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=n[o]}return r.default=n,u&&u.set(n,r),r}function $(n){return n&&n.__esModule?n:{default:n}}function A(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function O(n,i){for(var u=0;u<i.length;u++){var r=i[u];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,T(r.key),r)}}function M(n,i,u){return i&&O(n.prototype,i),u&&O(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n}function T(n){var i=m(n,"string");return g(i)==="symbol"?i:String(i)}function m(n,i){if(g(n)!=="object"||n===null)return n;var u=n[Symbol.toPrimitive];if(u!==void 0){var r=u.call(n,i||"default");if(g(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}function d(){return typeof Reflect!="undefined"&&Reflect.get?d=Reflect.get.bind():d=function(i,u,r){var t=v(i,u);if(!!t){var o=Object.getOwnPropertyDescriptor(t,u);return o.get?o.get.call(arguments.length<3?i:r):o.value}},d.apply(this,arguments)}function v(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=w(n),n!==null););return n}function p(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&_(n,i)}function _(n,i){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},_(n,i)}function R(n){var i=f();return function(){var r=w(n),t;if(i){var o=w(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return E(this,t)}}function E(n,i){if(i&&(g(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(n)}function y(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function f(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(n){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},w(n)}var l=function(n){p(u,n);var i=R(u);function u(r){var t;return A(this,u),t=i.call(this,r),t.params=r,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=r.mediaType.toLowerCase(),t.elementPosition=r.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return M(u,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var t=this;this.mediaListeners.error=function(){t.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){t.fireEvent("waiting")},this.mediaListeners.canplay=function(){t.fireEvent("canplay")},this.mediaListeners.ended=function(){t.fireEvent("finish")},this.mediaListeners.play=function(){t.fireEvent("play")},this.mediaListeners.pause=function(){t.fireEvent("pause")},this.mediaListeners.seeked=function(o){t.fireEvent("seek")},this.mediaListeners.volumechange=function(o){t.isMuted=t.media.muted,t.isMuted?t.volume=0:t.volume=t.media.volume,t.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(o){t.media.removeEventListener(o,t.mediaListeners[o]),t.media.addEventListener(o,t.mediaListeners[o])})}},{key:"createTimer",value:function(){var t=this,o=function a(){t.isPaused()||(t.fireEvent("audioprocess",t.getCurrentTime()),S.frame(a)())};this.on("play",o),this.on("pause",function(){t.fireEvent("audioprocess",t.getCurrentTime())})}},{key:"load",value:function(t,o,a,e){var c=document.createElement(this.mediaType);c.controls=this.params.mediaControls,c.autoplay=this.params.autoplay||!1,c.preload=e==null?"auto":e,c.src=t,c.style.width="100%";var k=o.querySelector(this.mediaType);k&&o.removeChild(k),o.appendChild(c),this._load(c,a,e)}},{key:"loadElt",value:function(t,o){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,o,t.preload)}},{key:"_load",value:function(t,o,a){if(!(t instanceof HTMLMediaElement)||typeof t.addEventListener=="undefined")throw new Error("media parameter is not a valid media element");typeof t.load=="function"&&!(o&&a=="none")&&t.load(),this.media=t,this._setupMediaListeners(),this.peaks=o,this.onPlayEnd=null,this.buffer=null,this.isMuted=t.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return t>=1/0&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(t){t!=null&&!isNaN(t)&&(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function(t,o){this.seekTo(t);var a=this.media.play();return o&&this.setPlayEnd(o),a}},{key:"pause",value:function(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function(t){var o=this;this.clearPlayEnd(),this._onPlayEnd=function(a){a>=t&&(o.pause(),o.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(t,o,a){return this.buffer?d(w(u.prototype),"getPeaks",this).call(this,t,o,a):this.peaks||[]}},{key:"setSinkId",value:function(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(t){this.volume=t,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(t){this.isMuted=this.media.muted=t}},{key:"destroy",value:function(){var t=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(o){t.media&&t.media.removeEventListener(o,t.mediaListeners[o])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),u}(V.default);h.default=l,L.exports=h.default},"./src/peakcache.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;function b(A){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},b(A)}function g(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function V(A,O){for(var M=0;M<O.length;M++){var T=O[M];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,x(T.key),T)}}function S(A,O,M){return O&&V(A.prototype,O),M&&V(A,M),Object.defineProperty(A,"prototype",{writable:!1}),A}function x(A){var O=B(A,"string");return b(O)==="symbol"?O:String(O)}function B(A,O){if(b(A)!=="object"||A===null)return A;var M=A[Symbol.toPrimitive];if(M!==void 0){var T=M.call(A,O||"default");if(b(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(A)}var $=function(){function A(){g(this,A),this.clearPeakCache()}return S(A,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(M,T,m){M!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=M);for(var d=[],v=0;v<this.peakCacheRanges.length&&this.peakCacheRanges[v]<T;)v++;for(v%2==0&&d.push(T);v<this.peakCacheRanges.length&&this.peakCacheRanges[v]<=m;)d.push(this.peakCacheRanges[v]),v++;v%2==0&&d.push(m),d=d.filter(function(_,R,E){return R==0?_!=E[R+1]:R==E.length-1?_!=E[R-1]:_!=E[R-1]&&_!=E[R+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(d),this.peakCacheRanges=this.peakCacheRanges.sort(function(_,R){return _-R}).filter(function(_,R,E){return R==0?_!=E[R+1]:R==E.length-1?_!=E[R-1]:_!=E[R-1]&&_!=E[R+1]});var p=[];for(v=0;v<d.length;v+=2)p.push([d[v],d[v+1]]);return p}},{key:"getCacheRanges",value:function(){var M=[],T;for(T=0;T<this.peakCacheRanges.length;T+=2)M.push([this.peakCacheRanges[T],this.peakCacheRanges[T+1]]);return M}}]),A}();h.default=$,L.exports=h.default},"./src/util/absMax.js":(L,h,b)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=x;var g=S(b("./src/util/max.js")),V=S(b("./src/util/min.js"));function S(B){return B&&B.__esModule?B:{default:B}}function x(B){var $=(0,g.default)(B),A=(0,V.default)(B);return-A>$?-A:$}L.exports=h.default},"./src/util/clamp.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=b;function b(g,V,S){return Math.min(Math.max(V,g),S)}L.exports=h.default},"./src/util/fetch.js":(L,h,b)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=T;var g=V(b("./src/util/observer.js"));function V(m){return m&&m.__esModule?m:{default:m}}function S(m){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},S(m)}function x(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function B(m,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(m,A(p.key),p)}}function $(m,d,v){return d&&B(m.prototype,d),v&&B(m,v),Object.defineProperty(m,"prototype",{writable:!1}),m}function A(m){var d=O(m,"string");return S(d)==="symbol"?d:String(d)}function O(m,d){if(S(m)!=="object"||m===null)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var p=v.call(m,d||"default");if(S(p)!=="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(m)}var M=function(){function m(d,v,p){x(this,m),this.instance=d,this.instance._reader=p.body.getReader(),this.total=parseInt(v,10),this.loaded=0}return $(m,[{key:"start",value:function(v){var p=this,_=function R(){p.instance._reader.read().then(function(E){var y=E.done,f=E.value;if(y){p.total===0&&p.instance.onProgress.call(p.instance,{loaded:p.loaded,total:p.total,lengthComputable:!1}),v.close();return}p.loaded+=f.byteLength,p.instance.onProgress.call(p.instance,{loaded:p.loaded,total:p.total,lengthComputable:p.total!==0}),v.enqueue(f),R()}).catch(function(E){v.error(E)})};_()}}]),m}();function T(m){if(m){if(!m.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var d=new g.default,v=new Headers,p=new Request(m.url);d.controller=new AbortController,m&&m.requestHeaders&&m.requestHeaders.forEach(function(E){v.append(E.key,E.value)});var _=m.responseType||"json",R={method:m.method||"GET",headers:v,mode:m.mode||"cors",credentials:m.credentials||"same-origin",cache:m.cache||"default",redirect:m.redirect||"follow",referrer:m.referrer||"client",signal:d.controller.signal};return fetch(p,R).then(function(E){d.response=E;var y=!0;E.body||(y=!1);var f=E.headers.get("content-length");return f===null&&(y=!1),y?(d.onProgress=function(w){d.fireEvent("progress",w)},new Response(new ReadableStream(new M(d,f,E)),R)):E}).then(function(E){var y;if(E.ok)switch(_){case"arraybuffer":return E.arrayBuffer();case"json":return E.json();case"blob":return E.blob();case"text":return E.text();default:y="Unknown responseType: "+_;break}throw y||(y="HTTP error status: "+E.status),new Error(y)}).then(function(E){d.fireEvent("success",E)}).catch(function(E){d.fireEvent("error",E)}),d.fetchRequest=p,d}L.exports=h.default},"./src/util/frame.js":(L,h,b)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=S;var g=V(b("./src/util/request-animation-frame.js"));function V(x){return x&&x.__esModule?x:{default:x}}function S(x){return function(){for(var B=arguments.length,$=new Array(B),A=0;A<B;A++)$[A]=arguments[A];return(0,g.default)(function(){return x.apply(void 0,$)})}}L.exports=h.default},"./src/util/get-id.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=b;function b(g){return g===void 0&&(g="wavesurfer_"),g+Math.random().toString(32).substring(2)}L.exports=h.default},"./src/util/index.js":(L,h,b)=>{Object.defineProperty(h,"__esModule",{value:!0}),Object.defineProperty(h,"Observer",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(h,"absMax",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(h,"clamp",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(h,"debounce",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(h,"fetchFile",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(h,"frame",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(h,"getId",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(h,"ignoreSilenceMode",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(h,"max",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(h,"min",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(h,"preventClick",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(h,"requestAnimationFrame",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(h,"style",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(h,"withOrientation",{enumerable:!0,get:function(){return v.default}});var g=_(b("./src/util/get-id.js")),V=_(b("./src/util/max.js")),S=_(b("./src/util/min.js")),x=_(b("./src/util/absMax.js")),B=_(b("./src/util/observer.js")),$=_(b("./src/util/style.js")),A=_(b("./src/util/request-animation-frame.js")),O=_(b("./src/util/frame.js")),M=_(b("./node_modules/debounce/index.js")),T=_(b("./src/util/prevent-click.js")),m=_(b("./src/util/fetch.js")),d=_(b("./src/util/clamp.js")),v=_(b("./src/util/orientation.js")),p=_(b("./src/util/silence-mode.js"));function _(R){return R&&R.__esModule?R:{default:R}}},"./src/util/max.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=b;function b(g){var V=-1/0;return Object.keys(g).forEach(function(S){g[S]>V&&(V=g[S])}),V}L.exports=h.default},"./src/util/min.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=b;function b(g){var V=Number(1/0);return Object.keys(g).forEach(function(S){g[S]<V&&(V=g[S])}),V}L.exports=h.default},"./src/util/observer.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;function b(A){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},b(A)}function g(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function V(A,O){for(var M=0;M<O.length;M++){var T=O[M];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,x(T.key),T)}}function S(A,O,M){return O&&V(A.prototype,O),M&&V(A,M),Object.defineProperty(A,"prototype",{writable:!1}),A}function x(A){var O=B(A,"string");return b(O)==="symbol"?O:String(O)}function B(A,O){if(b(A)!=="object"||A===null)return A;var M=A[Symbol.toPrimitive];if(M!==void 0){var T=M.call(A,O||"default");if(b(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(A)}var $=function(){function A(){g(this,A),this._disabledEventEmissions=[],this.handlers=null}return S(A,[{key:"on",value:function(M,T){var m=this;this.handlers||(this.handlers={});var d=this.handlers[M];return d||(d=this.handlers[M]=[]),d.push(T),{name:M,callback:T,un:function(p,_){return m.un(p,_)}}}},{key:"un",value:function(M,T){if(!!this.handlers){var m=this.handlers[M],d;if(m)if(T)for(d=m.length-1;d>=0;d--)m[d]==T&&m.splice(d,1);else m.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(M,T){var m=this,d=function v(){for(var p=arguments.length,_=new Array(p),R=0;R<p;R++)_[R]=arguments[R];T.apply(m,_),setTimeout(function(){m.un(M,v)},0)};return this.on(M,d)}},{key:"setDisabledEventEmissions",value:function(M){this._disabledEventEmissions=M}},{key:"_isDisabledEventEmission",value:function(M){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(M)}},{key:"fireEvent",value:function(M){for(var T=arguments.length,m=new Array(T>1?T-1:0),d=1;d<T;d++)m[d-1]=arguments[d];if(!(!this.handlers||this._isDisabledEventEmission(M))){var v=this.handlers[M];v&&v.forEach(function(p){p.apply(void 0,m)})}}}]),A}();h.default=$,L.exports=h.default},"./src/util/orientation.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=S;var b={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function g(x,B){return Object.prototype.hasOwnProperty.call(b,x)&&B?b[x]:x}var V=Symbol("isProxy");function S(x,B){return x[V]?x:new Proxy(x,{get:function(A,O,M){if(O===V)return!0;if(O==="domElement")return A;if(O==="style")return S(A.style,B);if(O==="canvas")return S(A.canvas,B);if(O==="getBoundingClientRect")return function(){return S(A.getBoundingClientRect.apply(A,arguments),B)};if(O==="getContext")return function(){return S(A.getContext.apply(A,arguments),B)};var T=A[g(O,B)];return typeof T=="function"?T.bind(A):T},set:function(A,O,M){return A[g(O,B)]=M,!0}})}L.exports=h.default},"./src/util/prevent-click.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=g;function b(V){V.stopPropagation(),document.body.removeEventListener("click",b,!0)}function g(V){document.body.addEventListener("click",b,!0)}L.exports=h.default},"./src/util/request-animation-frame.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var b=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(g,V){return setTimeout(g,1e3/60)}).bind(window);h.default=b,L.exports=h.default},"./src/util/silence-mode.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=b;function b(){var g=new AudioContext,V=g.createBufferSource();V.buffer=g.createBuffer(1,1,44100),V.connect(g.destination),V.start();var S="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",x=document.createElement("div");x.innerHTML='<audio x-webkit-airplay="deny"></audio>';var B=x.children.item(0);B.src=S,B.preload="auto",B.type="audio/mpeg",B.disableRemotePlayback=!0,B.play(),B.remove(),x.remove()}L.exports=h.default},"./src/util/style.js":(L,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=b;function b(g,V){return Object.keys(V).forEach(function(S){g.style[S]!==V[S]&&(g.style[S]=V[S])}),g}L.exports=h.default},"./src/wavesurfer.js":(L,h,b)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=M(b("./src/util/index.js")),V=A(b("./src/drawer.multicanvas.js")),S=A(b("./src/webaudio.js")),x=A(b("./src/mediaelement.js")),B=A(b("./src/peakcache.js")),$=A(b("./src/mediaelement-webaudio.js"));function A(r){return r&&r.__esModule?r:{default:r}}function O(r){if(typeof WeakMap!="function")return null;var t=new WeakMap,o=new WeakMap;return(O=function(e){return e?o:t})(r)}function M(r,t){if(!t&&r&&r.__esModule)return r;if(r===null||y(r)!=="object"&&typeof r!="function")return{default:r};var o=O(t);if(o&&o.has(r))return o.get(r);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in r)if(c!=="default"&&Object.prototype.hasOwnProperty.call(r,c)){var k=e?Object.getOwnPropertyDescriptor(r,c):null;k&&(k.get||k.set)?Object.defineProperty(a,c,k):a[c]=r[c]}return a.default=r,o&&o.set(r,a),a}function T(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&m(r,t)}function m(r,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},m(r,t)}function d(r){var t=_();return function(){var a=R(r),e;if(t){var c=R(this).constructor;e=Reflect.construct(a,arguments,c)}else e=a.apply(this,arguments);return v(this,e)}}function v(r,t){if(t&&(y(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(r)}function p(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(r){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},R(r)}function E(r,t,o){return t=n(t),t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o,r}function y(r){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(r)}function f(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function w(r,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,n(a.key),a)}}function l(r,t,o){return t&&w(r.prototype,t),o&&w(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}function n(r){var t=i(r,"string");return y(t)==="symbol"?t:String(t)}function i(r,t){if(y(r)!=="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var a=o.call(r,t||"default");if(y(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var u=function(r){T(o,r);var t=d(o);function o(a){var e;if(f(this,o),e=t.call(this),E(p(e),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:V.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),E(p(e),"backends",{MediaElement:x.default,WebAudio:S.default,MediaElementWebAudio:$.default}),E(p(e),"util",g),e.params=Object.assign({},e.defaultParams,a),e.params.splitChannelsOptions=Object.assign({},e.defaultParams.splitChannelsOptions,a.splitChannelsOptions),e.container=typeof a.container=="string"?document.querySelector(e.params.container):e.params.container,!e.container)throw new Error("Container element not found");if(e.params.mediaContainer==null?e.mediaContainer=e.container:typeof e.params.mediaContainer=="string"?e.mediaContainer=document.querySelector(e.params.mediaContainer):e.mediaContainer=e.params.mediaContainer,!e.mediaContainer)throw new Error("Media Container element not found");if(e.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(e.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(e.params.rtl===!0&&(e.params.vertical===!0?g.style(e.container,{transform:"rotateX(180deg)"}):g.style(e.container,{transform:"rotateY(180deg)"})),e.params.backgroundColor&&e.setBackgroundColor(e.params.backgroundColor),e.savedVolume=0,e.isMuted=!1,e.tmpEvents=[],e.currentRequest=null,e.arraybuffer=null,e.drawer=null,e.backend=null,e.peakCache=null,typeof e.params.renderer!="function")throw new Error("Renderer parameter is invalid");e.Drawer=e.params.renderer,e.params.backend=="AudioElement"&&(e.params.backend="MediaElement"),(e.params.backend=="WebAudio"||e.params.backend==="MediaElementWebAudio")&&!S.default.prototype.supportsWebAudio.call(null)&&(e.params.backend="MediaElement"),e.Backend=e.backends[e.params.backend],e.initialisedPluginList={},e.isDestroyed=!1,e.isReady=!1;var c=0;return e._onResize=g.debounce(function(){e.drawer.wrapper&&c!=e.drawer.wrapper.clientWidth&&!e.params.scrollParent&&(c=e.drawer.wrapper.clientWidth,c&&e.drawer.fireEvent("redraw"))},typeof e.params.responsive=="number"?e.params.responsive:100),v(e,p(e))}return l(o,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var c=this;return e.forEach(function(k){return c.addPlugin(k)}),e.forEach(function(k){k.deferInit||c.initPlugin(k.name)}),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var c=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach(function(W){c[W]=e.staticProps[W]});var k=e.instance,j=Object.getOwnPropertyNames(g.Observer.prototype);return j.forEach(function(W){k.prototype[W]=g.Observer.prototype[W]}),this[e.name]=new k(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if(typeof this[e].destroy!="function")throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(c){return e.destroyPlugin(c)})}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(c,k){setTimeout(function(){return e.seekTo(k)},0)}),this.drawer.on("scroll",function(c){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",c)})}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")}),this.backend.on("play",function(){return e.fireEvent("play")}),this.backend.on("pause",function(){return e.fireEvent("pause")}),this.backend.on("audioprocess",function(c){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",c)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){e.drawer.progress(e.backend.getPlayedPercents())}),this.backend.on("volume",function(){var c=e.getVolume();e.fireEvent("volume",c),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new B.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,c){var k=this;return this.params.ignoreSilenceMode&&g.ignoreSilenceMode(),this.fireEvent("interaction",function(){return k.play(e,c)}),this.backend.play(e,c)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var c=this.getDuration()||1,k=this.getCurrentTime()||0;k=Math.max(0,Math.min(c,k+(e||0))),this.seekAndCenter(k/c)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var c=this;if(typeof e!="number"||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return c.seekTo(e)});var k=this.params.backend==="WebAudio",j=this.backend.isPaused();k&&!j&&this.backend.pause();var W=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),k&&!j&&this.backend.play(),this.params.scrollParent=W,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){if(this.isMuted===!0){this.savedVolume=e;return}this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){if(e===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(e){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.params.splitChannelsOptions.channelColors[c]?this.params.splitChannelsOptions.channelColors[c].waveColor=e:this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(e,c){this.params.splitChannelsOptions.channelColors[c]?this.params.splitChannelsOptions.channelColors[c].progressColor=e:this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,g.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),c=this.drawer.getWidth(),k=e,j=0,W=Math.max(j+c,k);this.params.fillParent&&(!this.params.scrollParent||e<c)&&(k=c,j=0,W=k);var N;if(this.params.partialRender){var z=this.peakCache.addRangeToPeakCache(k,j,W),D;for(D=0;D<z.length;D++)N=this.backend.getPeaks(k,z[D][0],z[D][1]),this.drawer.drawPeaks(N,k,z[D][0],z[D][1])}else N=this.backend.getPeaks(k,j,W),this.drawer.drawPeaks(N,k,j,W);this.fireEvent("redraw",N,k)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var c=this;this.decodeArrayBuffer(e,function(k){c.isDestroyed||c.loadDecodedBuffer(k)})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var c=this,k=new FileReader;k.addEventListener("progress",function(j){return c.onProgress(j)}),k.addEventListener("load",function(j){return c.loadArrayBuffer(j.target.result)}),k.addEventListener("error",function(){return c.fireEvent("error","Error reading file")}),k.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,c,k,j){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),k){var W={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(k)===-1,"Peaks are not provided":!c,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof e!="string"},N=Object.keys(W).filter(function(z){return W[z]});N.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+N.join(`
	- `)),k=null)}switch(this.params.backend==="WebAudio"&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,c,j);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,c,k,j)}}},{key:"loadBuffer",value:function(e,c,k){var j=this,W=function(z){return z&&j.tmpEvents.push(j.once("ready",z)),j.getArrayBuffer(e,function(D){return j.loadArrayBuffer(D)})};if(c)this.backend.setPeaks(c,k),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",W));else return W()}},{key:"loadMediaElement",value:function(e,c,k,j){var W=this,N=e;if(typeof e=="string")this.backend.load(N,this.mediaContainer,c,k);else{var z=e;this.backend.loadElt(z,c),N=z.src}this.tmpEvents.push(this.backend.once("canplay",function(){W.backend.destroyed||(W.drawBuffer(),W.isReady=!0,W.fireEvent("ready"))}),this.backend.once("error",function(D){return W.fireEvent("error",D)})),c&&(this.backend.setPeaks(c,j),this.drawBuffer(),this.fireEvent("waveform-ready")),(!c||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(N,function(D){W.decodeArrayBuffer(D,function(U){W.backend.buffer=U,W.backend.setPeaks(null),W.drawBuffer(),W.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(e,c){var k=this;this.isDestroyed||(this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(j){!k.isDestroyed&&k.arraybuffer==e&&(c(j),k.arraybuffer=null)},function(){return k.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(e,c){var k=this,j=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),W=g.fetchFile(j);return this.currentRequest=W,this.tmpEvents.push(W.on("progress",function(N){k.onProgress(N)}),W.on("success",function(N){c(N),k.currentRequest=null}),W.on("error",function(N){k.fireEvent("error",N),k.currentRequest=null})),W}},{key:"onProgress",value:function(e){var c;e.lengthComputable?c=e.loaded/e.total:c=e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(c*100),e.target)}},{key:"exportPCM",value:function(e,c,k,j,W){e=e||1024,j=j||0,c=c||1e4,k=k||!1;var N=this.backend.getPeaks(e,j,W),z=[].map.call(N,function(D){return Math.round(D*c)/c});return new Promise(function(D,U){if(!k){var X=new Blob([JSON.stringify(z)],{type:"application/json;charset=utf-8"}),H=URL.createObjectURL(X);window.open(H),URL.revokeObjectURL(H)}D(z)})}},{key:"exportImage",value:function(e,c,k){return e||(e="image/png"),c||(c=1),k||(k="dataURL"),this.drawer.getImage(e,c,k)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(e){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(e){var c=new o(e);return c.init()}}]),o}(g.Observer);h.default=u,E(u,"VERSION","6.6.3"),E(u,"util",g),L.exports=h.default},"./src/webaudio.js":(L,h,b)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=S(b("./src/util/index.js"));function V(n){if(typeof WeakMap!="function")return null;var i=new WeakMap,u=new WeakMap;return(V=function(t){return t?u:i})(n)}function S(n,i){if(!i&&n&&n.__esModule)return n;if(n===null||x(n)!=="object"&&typeof n!="function")return{default:n};var u=V(i);if(u&&u.has(n))return u.get(n);var r={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var a=t?Object.getOwnPropertyDescriptor(n,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=n[o]}return r.default=n,u&&u.set(n,r),r}function x(n){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},x(n)}function B(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function $(n,i){for(var u=0;u<i.length;u++){var r=i[u];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,R(r.key),r)}}function A(n,i,u){return i&&$(n.prototype,i),u&&$(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n}function O(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&M(n,i)}function M(n,i){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},M(n,i)}function T(n){var i=v();return function(){var r=p(n),t;if(i){var o=p(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return m(this,t)}}function m(n,i){if(i&&(x(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(n)}function d(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function v(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(n){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},p(n)}function _(n,i,u){return i=R(i),i in n?Object.defineProperty(n,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):n[i]=u,n}function R(n){var i=E(n,"string");return x(i)==="symbol"?i:String(i)}function E(n,i){if(x(n)!=="object"||n===null)return n;var u=n[Symbol.toPrimitive];if(u!==void 0){var r=u.call(n,i||"default");if(x(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}var y="playing",f="paused",w="finished",l=function(n){O(u,n);var i=T(u);function u(r){var t,o,a;return B(this,u),a=i.call(this),_(d(a),"audioContext",null),_(d(a),"stateBehaviors",(t={},_(t,y,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var c=this.getDuration();return this.getCurrentTime()/c||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),_(t,f,{init:function(){},getPlayedPercents:function(){var c=this.getDuration();return this.getCurrentTime()/c||0},getCurrentTime:function(){return this.startPosition}}),_(t,w,{init:function(){this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t)),a.params=r,a.ac=r.audioContext||(a.supportsWebAudio()?a.getAudioContext():{}),a.lastPlay=a.ac.currentTime,a.startPosition=0,a.scheduledPause=null,a.states=(o={},_(o,y,Object.create(a.stateBehaviors[y])),_(o,f,Object.create(a.stateBehaviors[f])),_(o,w,Object.create(a.stateBehaviors[w])),o),a.buffer=null,a.filters=[],a.gainNode=null,a.mergedPeaks=null,a.offlineAc=null,a.peaks=null,a.playbackRate=1,a.analyser=null,a.scriptNode=null,a.source=null,a.splitPeaks=[],a.state=null,a.explicitDuration=r.duration,a.sinkStreamDestination=null,a.sinkAudioElement=null,a.destroyed=!1,a}return A(u,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(t){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(f),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(t){t&&t.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];this.setFilters(o)}},{key:"setFilters",value:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce(function(o,a){return o.connect(a),a},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor&&(this.scriptNode=this.params.audioScriptProcessor,this.scriptNode.connect(this.ac.destination))}},{key:"addOnAudioProcess",value:function(){var t=this,o=function a(){var e=t.getCurrentTime();e>=t.getDuration()&&t.state!==t.states[w]?(t.setState(w),t.fireEvent("pause")):e>=t.scheduledPause&&t.state!==t.states[f]?t.pause():t.state===t.states[y]&&(t.fireEvent("audioprocess",e),g.frame(a)())};o()}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(t){return t?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(t)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"setVolume",value:function(t){this.gainNode.gain.setValueAtTime(t,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(t,o,a){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(t,function(e){return o(e)},a):this.offlineAc.decodeAudioData(t).then(function(e){return o(e)}).catch(function(e){return a(e)})}},{key:"setPeaks",value:function(t,o){o!=null&&(this.explicitDuration=o),this.peaks=t}},{key:"setLength",value:function(t){if(!(this.mergedPeaks&&t==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var o=this.buffer?this.buffer.numberOfChannels:1,a;for(a=0;a<o;a++)this.splitPeaks[a]=[],this.splitPeaks[a][2*(t-1)]=0,this.splitPeaks[a][2*(t-1)+1]=0;this.mergedPeaks[2*(t-1)]=0,this.mergedPeaks[2*(t-1)+1]=0}}},{key:"getPeaks",value:function(t,o,a){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(o=o||0,a=a||t-1,this.setLength(t),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var e=this.createBuffer(1,4096,this.sampleRate);this.buffer=e.buffer}var c=this.buffer.length/t,k=~~(c/10)||1,j=this.buffer.numberOfChannels,W;for(W=0;W<j;W++){var N=this.splitPeaks[W],z=this.buffer.getChannelData(W),D=void 0;for(D=o;D<=a;D++){var U=~~(D*c),X=~~(U+c),H=z[U],Q=H,G=void 0;for(G=U;G<X;G+=k){var Y=z[G];Y>Q&&(Q=Y),Y<H&&(H=Y)}N[2*D]=Q,N[2*D+1]=H,(W==0||Q>this.mergedPeaks[2*D])&&(this.mergedPeaks[2*D]=Q),(W==0||H<this.mergedPeaks[2*D+1])&&(this.mergedPeaks[2*D+1]=H)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode&&this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[y]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(t,o){if(!!this.buffer)return this.scheduledPause=null,t==null&&(t=this.getCurrentTime(),t>=this.getDuration()&&(t=0)),o==null&&(o=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[w]&&this.setState(f),{start:t,end:o}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(t,o){if(!!this.buffer){this.createSource();var a=this.seekTo(t,o);t=a.start,o=a.end,this.scheduledPause=o,this.source.start(0,t),this.resumeAudioContext(),this.setState(y),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(f),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(t){this.scheduledPause=t}}]),u}(g.Observer);h.default=l,L.exports=h.default},"./node_modules/debounce/index.js":L=>{function h(b,g,V){var S,x,B,$,A;g==null&&(g=100);function O(){var T=Date.now()-$;T<g&&T>=0?S=setTimeout(O,g-T):(S=null,V||(A=b.apply(B,x),B=x=null))}var M=function(){B=this,x=arguments,$=Date.now();var T=V&&!S;return S||(S=setTimeout(O,g)),T&&(A=b.apply(B,x),B=x=null),A};return M.clear=function(){S&&(clearTimeout(S),S=null)},M.flush=function(){S&&(A=b.apply(B,x),B=x=null,clearTimeout(S),S=null)},M}h.debounce=h,L.exports=h}},I={};function F(L){var h=I[L];if(h!==void 0)return h.exports;var b=I[L]={exports:{}};return P[L](b,b.exports,F),b.exports}var q=F("./src/wavesurfer.js");return q})())})(ue);var Re=Ce(ue.exports),Ee=function(){var s=this,C=s.$createElement,P=s._self._c||C;return P("div",{staticClass:"wave-container"},[P("div",{ref:"waveform",attrs:{id:"waveform"}}),s.isReady?P("div",{staticClass:"wave-controls"},[P("icon-button",{directives:[{name:"show",rawName:"v-show",value:!s.compact,expression:"!compact"}],attrs:{name:"backward"},on:{click:function(I){return s.wavesurfer.skipBackward()}}}),P("icon-button",{attrs:{name:s.playing?"pause":"play"},on:{click:function(I){return s.wavesurfer.playPause()}}}),P("icon-button",{directives:[{name:"show",rawName:"v-show",value:!s.compact,expression:"!compact"}],attrs:{name:"forward"},on:{click:function(I){return s.wavesurfer.skipForward()}}}),P("icon-button",{directives:[{name:"show",rawName:"v-show",value:!s.compact,expression:"!compact"}],attrs:{name:s.isMute?"volumeMute":"volume"},on:{click:function(I){return s.wavesurfer.toggleMute()}}}),P("div",{directives:[{name:"show",rawName:"v-show",value:!s.compact,expression:"!compact"}],staticClass:"vue-player__time"},[s._v(" "+s._s(s.currentTime)+" / "+s._s(s.duration)+" ")])],1):s._e()])},Oe=[],ht="";const Se={name:"AudioVisualizer",components:{IconButton:re},props:{src:{type:String},compact:{type:Boolean,default:!1}},data(){return{wavesurfer:null}},computed:{isReady(){return this.wavesurfer},duration(){return this.isReady?Z(this.wavesurfer.getDuration()):Z(0)},currentTime(){return this.isReady?Z(this.wavesurfer.getCurrentTime()):Z(0)},isMute(){return this.isReady?this.wavesurfer.getMute():!1},playing(){return this.isReady?this.wavesurfer.isPlaying():!1}},watch:{src:{deep:!0,handler(){this.src&&this.wavesurfer.load(this.src)}}},mounted(){document.createElement("canvas").getContext("2d"),this.wavesurfer=Re.create({container:this.$refs.waveform,waveColor:"#0f6cbd",progressColor:"#0e4775",cursorColor:"#666",cursorWidth:1,barWidth:2,barHeight:1,barGap:null,height:32,normalize:!0,hideScrollbar:!0,responsive:!0,fillParent:!0})}},le={};var Me=J(Se,Ee,Oe,!1,xe,null,null,null);function xe(s){for(let C in le)this[C]=le[C]}var Te=function(){return Me.exports}();function ie(s,C){const P=C.getBoundingClientRect().width,I=s.target.getBoundingClientRect().left;let F=(s.clientX-I)/P;try{if(!s.target.className.match(/^ar\-line\-control/))return}catch{return}return F=F<0?0:F,F=F>1?1:F,F}var We=function(){var s=this,C=s.$createElement,P=s._self._c||C;return P("div",{ref:s.refId,staticClass:"player-line-control",on:{mousedown:s.onMouseDown}},[P("div",{staticClass:"player-line-control__head",style:s.calculateSize})])},Ve=[],pt="";const Be={props:{refId:{type:String},eventName:{type:String},percentage:{type:Number,default:0},rowDirection:{type:Boolean,default:!0}},computed:{calculateSize(){const s=this.percentage<1?this.percentage*100:this.percentage;return`${this.rowDirection?"width":"height"}: ${s}%`}},methods:{onMouseDown(s){const C=ie(s,this.$refs[this.refId]);this.$emit("change-linehead",C),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseUp(s){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);const C=ie(s,this.$refs[this.refId]);this.$emit("change-linehead",C)},onMouseMove(s){if(s.buttons==0)return;const C=ie(s,this.$refs[this.refId]);this.$emit("change-linehead",C)}}},ce={};var je=J(Be,We,Ve,!1,Le,null,null,null);function Le(s){for(let C in ce)this[C]=ce[C]}var fe=function(){return je.exports}(),De=function(){var s=this,C=s.$createElement,P=s._self._c||C;return P("div",{staticClass:"player-volume"},[P("icon-button",{staticClass:"player-volume__icon",attrs:{name:"volume"}}),P("line-control",{staticClass:"player-volume-bar",attrs:{"ref-id":"volume",percentage:s.volume},on:{"change-linehead":s.onChangeLinehead}})],1)},Ie=[],vt="";const Ne={data(){return{volume:100}},components:{IconButton:re,LineControl:fe},methods:{onChangeLinehead(s){this.$emit("change-volume",s),this.volume=s}}},de={};var $e=J(Ne,De,Ie,!1,Fe,null,null,null);function Fe(s){for(let C in de)this[C]=de[C]}var ze=function(){return $e.exports}(),He=function(){var s=this,C=s.$createElement,P=s._self._c||C;return P("div",{staticClass:"recorder-player"},[P("div",{staticClass:"vue-player"},[P("div",{staticClass:"vue-player-actions"},[P("icon-button",{staticClass:"ar-icon ar-icon__lg vue-player__play",class:{"vue-player__play--active":s.isPlaying},attrs:{id:"play",name:s.playBtnIcon},on:{click:s.playback}})],1),P("div",{staticClass:"vue-player-bar"},[P("div",{directives:[{name:"show",rawName:"v-show",value:!s.compact,expression:"!compact"}],staticClass:"vue-player__time"},[s._v(" "+s._s(s.playedTime)+" / "+s._s(s.duration)+" ")]),P("line-control",{staticClass:"vue-player__progress",attrs:{"ref-id":"progress",percentage:s.progress},on:{"change-linehead":s._onUpdateProgress}}),P("volume-control",{on:{"change-volume":s._onChangeVolume}})],1)]),P("audio",{ref:"playerRef",attrs:{src:s.audioSource,type:"audio/mpeg"}})])},Ue=[],mt="";const qe={name:"PlayerWidget",components:{IconButton:re,LineControl:fe,VolumeControl:ze},props:{src:{type:String},compact:{type:Boolean,default:!1}},data(){return{isPlaying:!1,duration:Z(0),playedTime:Z(0),progress:0}},mounted(){this.player=this.$refs.playerRef,this.player.addEventListener("ended",()=>{this.isPlaying=!1}),this.player.addEventListener("loadeddata",s=>{this._resetProgress(),this.duration=Z(this.player.duration)}),this.player.addEventListener("timeupdate",this._onTimeUpdate)},computed:{audioSource(){return this.src?this.src:""},playBtnIcon(){return this.isPlaying?"pause":"play"}},methods:{playback(){!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(()=>{this.player.play()},0),this.isPlaying=!this.isPlaying)},_resetProgress(){this.isPlaying&&this.player.pause(),this.duration=Z(0),this.playedTime=Z(0),this.progress=0,this.isPlaying=!1},_onTimeUpdate(){this.playedTime=Z(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100},_onUpdateProgress(s){s&&(this.currentTime=s*this.duration)},_onChangeVolume(s){s&&(this.player.volume=s)}}},he={};var Ze=J(qe,He,Ue,!1,Ge,null,null,null);function Ge(s){for(let C in he)this[C]=he[C]}var Xe=function(){return Ze.exports}(),Ye=function(){var s=this,C=s.$createElement,P=s._self._c||C;return s.customPlayer?P("custom-player",{attrs:{src:s.audioSource,compact:s.compact,disabled:s.disablePlayer}}):s.wavePlayer?P("audio-visualizer",{attrs:{src:s.audioSource,compact:s.compact,disabled:s.disablePlayer}}):P("figure",[P("audio",{ref:"playerRef",staticClass:"mx-auto",attrs:{controls:"",src:s.audioSource,type:"audio/mpeg"}},[s._v(" Your browser does not support the "),P("code",[s._v("audio")]),s._v(" element. ")])])},Qe=[],yt="";const Ke={name:"PlayerWidget",components:{AudioVisualizer:Te,CustomPlayer:Xe},props:{record:{type:Object},src:{type:String},customPlayer:{type:Boolean,default:!1},wavePlayer:{type:Boolean,default:!1},compact:{type:Boolean,default:!1}},data(){return{isPlaying:!1,duration:Z(0),playedTime:Z(0),progress:0}},computed:{disablePlayer(){return this.objectNullOrEmpty(this.record)&&!this.src},audioSource(){return this.record?this.record.url:this.src?this.src:""}},methods:{objectNullOrEmpty(s){return s?Object.keys(s).length===0:!0}}},pe={};var Je=J(Ke,Ye,Qe,!1,et,null,null,null);function et(s){for(let C in pe)this[C]=pe[C]}var ve=function(){return Je.exports}(),tt=function(){var s=this,C=s.$createElement,P=s._self._c||C;return P("div",{staticClass:"recorder-container"},[P("div",{class:{compact:s.compact}},[P("div",{staticClass:"recorder-action"},[P("icon-button",{staticClass:"vue-recorder-action",attrs:{name:s.iconButtonType,disabled:s.attemptsLeft==0},on:{click:function(I){return s.toggleRecording()}}}),s.compact?s._e():P("icon-button",{staticClass:"vue-recorder-stop",attrs:{name:"stop",disabled:s.attemptsLeft==0},on:{click:function(I){return s.stopRecording()}}})],1),P("div",{staticClass:"timing"},[s.attempts&&!s.compact?P("div",{staticClass:"time-attempt"},[s._v(" Attempts: "+s._s(s.attemptsLeft)+"/"+s._s(s.attempts)+" ")]):s._e(),P("div",{staticClass:"recording-time"},[s.countdown?P("span",[s._v(" "+s._s(s.countdownTitle))]):s._e(),P("span",{staticClass:"recorder-timer"},[s._v(s._s(s.recordedTime))])]),s.time&&!s.compact?P("div",{staticClass:"time-limit"},[s._v(" Record duration is limited: "+s._s(s.time)+"s ")]):s._e()])]),!s.compact&&s.recordList.length>0?P("div",{staticClass:"vue-records"},s._l(s.recordList,function(I,F){return P("div",{key:I.id,staticClass:"vue-records__record",class:{"vue-records__record--selected":I.id===s.selected.id},on:{click:function(q){return s.choiceRecord(I)}}},[P("span",[s._v("Record "+s._s(F+1))]),P("div",{staticClass:"list-actions"},[I.id===s.selected.id&&s.showDownloadButton?P("icon-button",{attrs:{id:"download",name:"download"},on:{click:s.download}}):s._e(),I.id===s.selected.id&&s.showUploadButton?P("icon-button",{staticClass:"submit-button",attrs:{id:"upload",name:"upload"},on:{click:s.sendData}}):s._e(),I.id===s.selected.id?P("icon-button",{attrs:{name:"remove"},on:{click:function(q){return s.removeRecord(F)}}}):s._e()],1),P("div",{staticClass:"vue__text"},[s._v(s._s(I.duration))])])}),0):s._e(),P("player-widget",{attrs:{"custom-player":s.customPlayer,wavePlayer:s.wavePlayer,record:s.selected,compact:s.compact}}),s.successMessage||s.errorMessage?P("div",{staticClass:"recorder-message"},[s.successMessage?P("span",{staticClass:"color-success"},[s._v(" "+s._s(s.successMessage)+" ")]):s._e(),s.errorMessage?P("span",{staticClass:"color-danger"},[s._v(" "+s._s(s.errorMessage)+" ")]):s._e()]):s._e()],1)},rt=[],gt="";const nt="Failed to use microphone. Please refresh and try again and permit the use of a microphone.",it="Successfully recorded message!",at={name:"RecorderWidget",components:{IconButton:re,PlayerWidget:ve},props:{attempts:{type:Number},time:{type:Number},bitRate:{type:Number,default:128},sampleRate:{type:Number,default:44100},filename:{type:String,default:"audio"},countdownTitle:{type:String,default:"Time remaining"},backendEndpoint:{type:String},showDownloadButton:{type:Boolean,default:!0},showUploadButton:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},customPlayer:{type:Boolean,default:!1},wavePlayer:{type:Boolean,default:!1},countdown:{type:Boolean,default:!1},selectRecordChanged:{type:Function,default:null},customUpload:{type:Function,default:null}},data(){return{recording:!1,recorder:null,successMessage:null,errorMessage:null,recordList:[],selected:{}}},computed:{recordedTime(){var s,C;return this.countdown?Z(this.time-((s=this.recorder)==null?void 0:s.duration)):Z((C=this.recorder)==null?void 0:C.duration)},attemptsLeft(){return this.attempts-this.recordList.length},iconButtonType(){return this.recording&&this.compact?"stop":this.recording?"record":"mic"}},watch:{"recorder.duration":{deep:!0,handler(){var s;this.time&&((s=this.recorder)==null?void 0:s.duration)>=this.time&&this.toggleRecording()}}},beforeUnmount(){this.recording&&this.stopRecording()},methods:{toggleRecording(){this.recording=!this.recording,this.recording?this.initRecorder():this.stopRecording()},initRecorder(){this.recorder=new be({micFailed:this.micFailed,bitRate:this.bitRate,sampleRate:this.sampleRate}),this.recorder.start(),this.successMessage=null,this.errorMessage=null,this.service=new te(this.backendEndpoint),this.$emit("beforeRecording")},stopRecording(){this.recording=!1,this.recorder.stop();const s=this.recorder.recordList();this.selected=s[0],this.selected&&this.selected.url?(this.recordList.push(this.selected),this.successMessage=it,this.$emit("afterRecording",this.selected)):this.errorMessage=ERROR_SUBMITTING_MESSAGE},async sendData(){!this.selected||this.customUpload(this.selected.blob)},micFailed(){this.recording=!1,this.errorMessage=nt,this.$emit("micFailed")},removeRecord(s){this.recordList.splice(s,1),this.$set(this.selected,"url",null),this.$emit("removeRecord",s)},choiceRecord(s){this.selected!==s&&this.$emit("selectRecordChanged",s)},download(){if(this.selected&&!this.selected.url)return;const s=this.selected.blob.type.split("/")[1],C=document.createElement("a");C.href=this.selected.url,C.download=`${this.filename}.${s}`,C.click()}}},me={};var st=J(at,tt,rt,!1,ot,null,null,null);function ot(s){for(let C in me)this[C]=me[C]}var ut=function(){return st.exports}();K.PlayerWidget=ve,K.RecorderWidget=ut,Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
